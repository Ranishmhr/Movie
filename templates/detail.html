{% extends "base.html" %}

{% block body %}
<style type="text/css">
    .center {
  display: block;
  margin-left: auto;
  margin-right: auto;
  width: 50%;
}
</style>
<div style="margin-top:-20px;"
            class='card text-black blue-gradient mb-3' style="max-width: 20rem;">
            <div class="card-header "style="background:red; color:white">{{detail.title}}</div>
            <div class="card-body"style="background: #f5eeee">
                <div class="row">
                <div class="column" style=" float: left;
  width: 50%;">

                <p class="card-text text-black">Genre: {{detail.genres}}</p>

                <p class="card-text text-black">Rating: {{rating.rating|floatformat:2}}</p>
 <p >{{detail.description}}</p>
            </div>
            <div class="column" style=" float: right;
  width: 50%;">
                <img src="/media/{{detail.photo}}" class="center">
            </div>
        </div>
            </div>
        </div>
        {% if condition == "false" %}
        <div class="card">
            <div class="card-body"style="background: #f5eeee"   >
                <h3 class="text-center">Add Review</h3>
                <form action="{% url 'movies:add_review' detail.id %}" method="POST">
                    {% csrf_token %}
                    <label >Review</label>
                    <textarea name="comment" cols="30" rows="5" class="form-control"></textarea>

                    <label for="rating">Rating:</label>


                    <input style="margin-top:4px;" type="range" name="rating" id="rating" value="0" min="1" max="5" step="0.5" oninput="OutputId.value = rating.value"
                    >
                   <output name="output" id="OutputId">0</output>




                    <br>
                    <input type="submit" class="btn btn-danger" value="Add Review">

                </form>
            </div>
        </div>
        {% else %}
        <div class="card">
            <div class="card-body"style="background: #f5eeee"   >
                <h3 class="text-center">You have arleady Reviewed.</h3>
            </div>
        </div>
        {% endif %}
        <br>
        <div class="card box">
            <div class="card-body" style="background: #f5eeee">
                <h3 class="text-center">Reviews</h3>
                <ul id="myList" style="list-style:none;padding-left: 0px;" >
                {% for review in reviews %}
                    <li class="card">
                        <div class="card-body" >
                            <div class="row">

                                <div class="col-md-3">

                                    <h5 class="text-left" style="text-transform: capitalize;">{{review.userid.username}}</h5>
                                    <h5>{{review.rating}}</h5>
                                    {% if current_user == review.userid.id %}
                                    <a href="{% url 'movies:edit_review' review.id %}">Edit</a>
                                    {% endif %}

                                </div>
                                <div class="col-md-9">  
                                  <p>{{ review.comment }}  </p>

                            </div>

                            </div>

                        </div>

                    </li>
                 <li><br></li>
                {% endfor %}
                </ul>
                <center><input id="loadMore" type="submit" class="btn btn-danger" value="Load More"></center>

            </div>
        </div>

<style type="text/css">
    #myList li{ display:none;

}
#loadMore {
  
    cursor:pointer;
}
#loadMore:hover {
    color:black;
}
#showLess {
    color:red;
    cursor:pointer;
}
#showLess:hover {
    color:black;
}
</style>
<script type="text/javascript">

    $(function () {
    $("li").slice(0,8).show();
    $("#loadMore").on('click', function (e) {
        e.preventDefault();
        $("li:hidden").slice(0,8).slideDown();
        if ($("li:hidden").length == 0) {
            $("#load").fadeOut('slow');
        }
        $('html,body').animate({
            scrollTop: $(this).offset().top
        }, 1500);
    });
});
</script>

{% endblock body %}
